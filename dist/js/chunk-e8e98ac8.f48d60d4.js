(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8e98ac8"],{"0795":function(e,t,i){},"33fa":function(e,t,i){"use strict";var s=i("0795"),n=i.n(s);n.a},"3be0":function(e,t,i){"use strict";var s=i("7d58"),n=i.n(s);n.a},"69af":function(e,t,i){},"6c85":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"video-rec-container"},[i("video-capture",{on:{done:e.getUrl}}),e.videoUrl?i("div",{staticClass:"video-url-containe"},[i("h1",[e._v("Your Video URL")]),i("a",{attrs:{href:e.videoUrl}},[i("h1",[e._v("Your Video Is Ready!")])])]):e._e()],1)},n=[],o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("Loader",{directives:[{name:"show",rawName:"v-show",value:e.isUploading,expression:"isUploading"}]}),i("section",{directives:[{name:"show",rawName:"v-show",value:!e.isUploading,expression:"!isUploading"}],staticClass:"video-cap-container"},[i("div",{staticClass:"stream-container"},[i("video",{ref:"videoRec",staticClass:"camera",attrs:{loop:"",controls:"",autoplay:""}}),e.isFinished?e._e():[e.isRecording?i("button",{staticClass:"btn",on:{click:e.stop}},[i("i",{staticClass:"far fa-circle"})]):i("button",{staticClass:"btn",on:{click:e.record}},[i("i",{staticClass:"fas fa-circle"})])]],2),e.isFinished?i("div",{staticClass:"controls"},[i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.resetVideo(t)}}},[i("i",{staticClass:"fas fa-undo-alt"})]),i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.done(t)}}},[i("i",{staticClass:"fas fa-thumbs-up"})])]):e._e()])],1)},a=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"loader"})},c=[],d={},l=d,u=(i("74ae"),i("2877")),h=Object(u["a"])(l,r,c,!1,null,null,null),f=h.exports,v={components:{Loader:f},data:function(){return{isUploading:!1,isRecording:!1,isFinished:!1,recorder:null,connection:null,videoUrl:null}},created:function(){this.getWebSocket()},mounted:function(){this.resetVideo()},methods:{resetVideo:function(){this.isFinished=!1,this.isRecording=!1,navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720}},audio:!0}).then(this.gotStream).catch(this.handleError)},record:function(){this.recorder.start(),this.isRecording=!0},stop:function(){this.recorder.stop(),this.isRecording=!1,this.isFinished=!0,this.connection.send("DONE")},done:function(){this.resetVideo(),this.$emit("done",this.videoUrl)},gotStream:function(e){this.recorder=new MediaRecorder(e,{mimeType:"video/webm",audioBitsPerSecond:128e3}),this.recorder.ondataavailable=this.videoDataHandler,this.$refs.videoRec.src=null,this.$refs.videoRec.srcObject=e,this.toggleVideo()},videoDataHandler:function(e){var t=this;this.isUploading=!0;var i=new FileReader;i.readAsArrayBuffer(e.data),i.onloadend=function(){t.connection.send(i.result)}},getWebSocket:function(){var e=this,t="wss://puki.ninja";this.connection=new WebSocket(t),this.connection.binaryType="arraybuffer",this.connection.onmessage=function(t){e.updateVideoFile(t.data)}},updateVideoFile:function(e){this.videoUrl="https://puki.ninja/uploads/"+e+".webm",this.toggleVideo(),this.$refs.videoRec.srcObject=null,this.$refs.videoRec.src=this.videoUrl,this.isUploading=!1},toggleVideo:function(){this.$refs.videoRec.loop=!this.$refs.videoRec.loop,this.$refs.videoRec.controls=!this.$refs.videoRec.controls}}},p=v,b=(i("3be0"),Object(u["a"])(p,o,a,!1,null,"2469cb63",null)),g=b.exports,m={components:{VideoCapture:g,Loader:f},data:function(){return{videoUrl:null}},methods:{getUrl:function(e){this.videoUrl=e}}},w=m,U=(i("33fa"),Object(u["a"])(w,s,n,!1,null,"1cc2f896",null));t["default"]=U.exports},"74ae":function(e,t,i){"use strict";var s=i("69af"),n=i.n(s);n.a},"7d58":function(e,t,i){}}]);
//# sourceMappingURL=chunk-e8e98ac8.f48d60d4.js.map